<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>HW04 Using a Relational Database Management System | Crafting Software</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="HW04 Using a Relational Database Management System" /><meta name="author" content="Michael Hilton and Josh Sunshine" /><meta property="og:locale" content="en_US" /><meta name="description" content="Welcome to Crafting Software" /><meta property="og:description" content="Welcome to Crafting Software" /><link rel="canonical" href="https://cmu-crafting-software.github.io/2020/assignments/hw4" /><meta property="og:url" content="https://cmu-crafting-software.github.io/2020/assignments/hw4" /><meta property="og:site_name" content="Crafting Software" /> <script type="application/ld+json"> {"description":"Welcome to Crafting Software","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://cmu-crafting-software.github.io/2020/assets/images/crafting_software_header_noBG.png"},"name":"Michael Hilton and Josh Sunshine"},"url":"https://cmu-crafting-software.github.io/2020/assignments/hw4","headline":"HW04 Using a Relational Database Management System","@type":"WebPage","author":{"@type":"Person","name":"Michael Hilton and Josh Sunshine"},"@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="https://cmu-crafting-software.github.io/2020/" class="site-title lh-tight"><div class="site-logo"></div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="https://cmu-crafting-software.github.io/2020/resources/" class="nav-list-link">Resources</a><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://cmu-crafting-software.github.io/2020/assignments/" class="nav-list-link">Assignments</a><ul class="nav-list "><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/final-project" class="nav-list-link">Final Project</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw1" class="nav-list-link">HW01 Version Control</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw2" class="nav-list-link">HW02 Reading Data</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw3" class="nav-list-link">HW03 Defensive Programming</a><li class="nav-list-item active"><a href="https://cmu-crafting-software.github.io/2020/assignments/hw4" class="nav-list-link active">HW04 Using a Relational Database Management System</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw5" class="nav-list-link">HW05 Advanced Data Management System</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw6" class="nav-list-link">HW06 Final Project Proposal</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw7" class="nav-list-link">HW07 Pandas</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw8" class="nav-list-link">HW08 Project proposal revision and data visualization reading</a><li class="nav-list-item "><a href="https://cmu-crafting-software.github.io/2020/assignments/hw9" class="nav-list-link">HW09 Visualization</a></ul><li class="nav-list-item"><a href="https://cmu-crafting-software.github.io/2020/calendar/" class="nav-list-link">Calendar</a><li class="nav-list-item"><a href="https://cmu-crafting-software.github.io/2020/schedule/" class="nav-list-link">Schedule</a><li class="nav-list-item"><a href="https://cmu-crafting-software.github.io/2020/staff/" class="nav-list-link">Staff</a><li class="nav-list-item"><a href="https://cmu-crafting-software.github.io/2020/syllabus/" class="nav-list-link">Syllabus</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Crafting Software" aria-label="Search Crafting Software" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://cmu-crafting-software.github.io/2020/assignments/">Assignments</a><li class="breadcrumb-nav-list-item"><span>HW04 Using a Relational Database Management System</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 id="homework-4"> <a href="#homework-4" class="anchor-heading" aria-labelledby="homework-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Homework 4</h1><p>In this homework, you will build a Python application that interacts with the PostgreSQL relational database managements system. You will create a database, read data from two APIs, insert the data into the database, and queries from the database. Please read the entire assignment in full before you begin. You might find some helpful information in the Resources section.</p><h2 id="skills-demonstrated"> <a href="#skills-demonstrated" class="anchor-heading" aria-labelledby="skills-demonstrated"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Skills demonstrated</h2><ul><li>Design tables and their relationships that are appropriate for a data set.<li>Write code to define a database.<li>Insert data into a database.<li>Query data from a database.</ul><h2 id="tasks"> <a href="#tasks" class="anchor-heading" aria-labelledby="tasks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tasks</h2><h3 id="1-retrieve-covid-vaccination-and-state-population-data"> <a href="#1-retrieve-covid-vaccination-and-state-population-data" class="anchor-heading" aria-labelledby="1-retrieve-covid-vaccination-and-state-population-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Retrieve COVID vaccination and state population data</h3><ul><li>Use Python to retrieve the 2019 Census estimated population of each state for each of the following age groups: Age 85 years and older, Age 80 to 84 years, Age 75 to 79 years, Age 70 to 74 years, Age 65 to 69 years, Age 60 to 64 years, Age 55 to 59 years, Age 50 to 54 years, Age 45 to 49 years, Age 40 to 44 years, Age 35 to 39 years, Age 30 to 34 years, Age 25 to 29 years, Age 20 to 24 years, Age 15 to 19 years, Age 10 to 14 years, Age 5 to 9 years, Age 0 to 4 years. Use the Census “charagegroups” API. Refer back to the in-class from February 12 for examples of use.<li>Use Python to retrieve the COVID testing data for every state from each day using <a href="https://covidtracking.com/">The Covid Tracking Project</a>. It’s probably easiest to load the data from <a href="https://covidtracking.com/data/download/all-states-history.csv">a file</a>, but you can also use the API if you prefer. You will ultimately store this data in the database. For now, read from the APIs and files and assign the result to Python variables.</ul><h3 id="2-create-database-tables"> <a href="#2-create-database-tables" class="anchor-heading" aria-labelledby="2-create-database-tables"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Create database tables</h3><ul><li>Design a reasonable table layout for the data retrieved in the previous step. Use at least two tables and choose reasonable relationships between tables. Every table should have a primary key. Use foreign key(s) to preserve referential integrity.<li>Write SQL data definition language (DDL) code to create the tables you designed. Be sure to choose reasonable datatypes for each column and use primary and foreign keys where appropriate.<li>At the minimum your tables should include the following columns across all the tables. You can discard other data from step 1 or add additional columns: state_code, state_name, age_group_id, age_group_description, population, test_date, negative_increase, positive_increase, total_test_results_increase.<li>Save your SQL DDL code in a file called <code class="language-plaintext highlighter-rouge">createTables.sql</code>.<li>Create the tables in your database using the SQL DDL code you wrote.</ul><h3 id="3-insert-the-retrieved-data-into-tables"> <a href="#3-insert-the-retrieved-data-into-tables" class="anchor-heading" aria-labelledby="3-insert-the-retrieved-data-into-tables"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Insert the retrieved data into tables</h3><ul><li>Use Python to insert all of the data retrieved in step 1 above into the database defined in Step 2.</ul><h3 id="4-query-the-database"> <a href="#4-query-the-database" class="anchor-heading" aria-labelledby="4-query-the-database"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Query the database</h3><p>Use Python to query the database and print out answers to the following below. Feel free to use any combination of SQL queries and Python code to answer the question.</p><ul><li>Which state has the lowest percentage of people aged 85 years and older? Print the name of the state, the percentage, to 85+ population, and the total population.<li>Which state had the most positive tests per capita in a single day? Print the name of state, the day, the number of positive tests per capita, the population of the state, and the number of positive tests.<li>The Python code you wrote in this step, step 1, and step 3 should be save in a file called <code class="language-plaintext highlighter-rouge">readAndInsert.py</code>.</ul><h2 id="resources"> <a href="#resources" class="anchor-heading" aria-labelledby="resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resources</h2><ul><li>https://github.com/cmu-crafting-software/in-class/tree/main/feb-12-apis<li>https://api.census.gov/data/2019/pep/charagegroups/variables.html<li>https://api.census.gov/data/2019/pep/charagegroups/variables/AGEGROUP.json</ul><h2 id="deadline-and-deliverables"> <a href="#deadline-and-deliverables" class="anchor-heading" aria-labelledby="deadline-and-deliverables"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deadline and deliverables</h2><p>The Homework is due at 4pm EST on Tuesday, March 9. Please hand in the following files by pushing them to your homework repository in a directory called HW4:</p><ul><li><code class="language-plaintext highlighter-rouge">creatTables.sql</code><li><code class="language-plaintext highlighter-rouge">readAndInsert.py</code></ul></div></div><div class="search-overlay"></div></div>
