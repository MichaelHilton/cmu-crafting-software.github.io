<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>HW05 Advanced Data Management System | Crafting Software</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="HW05 Advanced Data Management System" /><meta name="author" content="Michael Hilton and Josh Sunshine" /><meta property="og:locale" content="en_US" /><meta name="description" content="Welcome to Crafting Software" /><meta property="og:description" content="Welcome to Crafting Software" /><link rel="canonical" href="assignments/hw5" /><meta property="og:url" content="assignments/hw5" /><meta property="og:site_name" content="Crafting Software" /> <script type="application/ld+json"> {"description":"Welcome to Crafting Software","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"assets/images/crafting_software_header_noBG.png"},"name":"Michael Hilton and Josh Sunshine"},"url":"assignments/hw5","headline":"HW05 Advanced Data Management System","@type":"WebPage","author":{"@type":"Person","name":"Michael Hilton and Josh Sunshine"},"@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="" class="site-title lh-tight"><div class="site-logo"></div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="resources/" class="nav-list-link">Resources</a><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="assignments/" class="nav-list-link">Assignments</a><ul class="nav-list "><li class="nav-list-item "><a href="assignments/final-project" class="nav-list-link">Final Project</a><li class="nav-list-item "><a href="assignments/hw1" class="nav-list-link">HW01 Version Control</a><li class="nav-list-item "><a href="assignments/hw2" class="nav-list-link">HW02 Reading Data</a><li class="nav-list-item "><a href="assignments/hw3" class="nav-list-link">HW03 Defensive Programming</a><li class="nav-list-item "><a href="assignments/hw4" class="nav-list-link">HW04 Using a Relational Database Management System</a><li class="nav-list-item active"><a href="assignments/hw5" class="nav-list-link active">HW05 Advanced Data Management System</a><li class="nav-list-item "><a href="assignments/hw6" class="nav-list-link">HW06 Final Project Proposal</a><li class="nav-list-item "><a href="assignments/hw7" class="nav-list-link">HW07 Pandas</a><li class="nav-list-item "><a href="assignments/hw8" class="nav-list-link">HW08 Project proposal revision and data visualization reading</a><li class="nav-list-item "><a href="assignments/hw9" class="nav-list-link">HW09 Visualization</a></ul><li class="nav-list-item"><a href="calendar/" class="nav-list-link">Calendar</a><li class="nav-list-item"><a href="schedule/" class="nav-list-link">Schedule</a><li class="nav-list-item"><a href="staff/" class="nav-list-link">Staff</a><li class="nav-list-item"><a href="syllabus/" class="nav-list-link">Syllabus</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Crafting Software" aria-label="Search Crafting Software" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="assignments/">Assignments</a><li class="breadcrumb-nav-list-item"><span>HW05 Advanced Data Management System</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 id="homework-5"> <a href="#homework-5" class="anchor-heading" aria-labelledby="homework-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Homework 5</h1><p>In this homework, you will continue working with your python application that interacts with an RDBMS (Relational Database Management System). This work will build on your HW4 solution. Please read the entire assignment in full before you begin. You might find some helpful information in the Resources section.</p><h2 id="learning-goals"> <a href="#learning-goals" class="anchor-heading" aria-labelledby="learning-goals"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Learning goals</h2><ul><li>Demonstrate ability to use database features like views, transactions, and indexes<li>Generate random data for testing database performance<li>Applying previous skills, git/github and reading files</ul><h2 id="tasks"> <a href="#tasks" class="anchor-heading" aria-labelledby="tasks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tasks</h2><p>You will be asked to perform the following series of tasks:</p><ul><li>Create a view in your table<li>Create a transaction to make at least two changes do the DB in a single transaction<li>Create random data to test our database<li>Join existing data with random data<li>Add an index to your table and measure a change in performance</ul><h4 id="create-a-view-in-your-table"> <a href="#create-a-view-in-your-table" class="anchor-heading" aria-labelledby="create-a-view-in-your-table"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a view in your table</h4><p>You should create a view of a query. Your view should show the population for each state for all ages, and all ages only. You should name your view something that makes it clear that it is all ages population.<br /> You should perform these commands via a python script.<br /> You can start with your answer to hw4, and add the creation of a view.<br /> HINT: the “ OR REPLACE” keyword might come in handy to be able to re-run your script multiple times.</p><h4 id="create-a-transaction-to-make-at-least-two-changes-do-the-db-in-a-single-transaction"> <a href="#create-a-transaction-to-make-at-least-two-changes-do-the-db-in-a-single-transaction" class="anchor-heading" aria-labelledby="create-a-transaction-to-make-at-least-two-changes-do-the-db-in-a-single-transaction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a transaction to make at least two changes do the DB in a single transaction</h4><p>You should create a transaction in your database. Your transaction should alter at least two rows in the transaction. You may choose which two rows to alter. You should print out the values of the rows first, then perform the transaction, then print the new values. This should also be done in your python script.</p><h4 id="create-random-data-to-test-our-database"> <a href="#create-random-data-to-test-our-database" class="anchor-heading" aria-labelledby="create-random-data-to-test-our-database"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create random data to test our database</h4><p>In order to be able to test an index, we will need more data. To do this, you should create a new table, and fill it with random data. This can be done with the following SQL commands.</p><p>CREATE TABLE rand_state_data( rand_id SERIAL PRIMARY KEY, rand_state_code numeric NOT NULL, rand_value NUMERIC NOT NULL );</p><p>INSERT INTO rand_state_data (rand_state_code,rand_value) SELECT ((random() * 49)+1)::integer, ((random() * 99) + 1)::integer FROM generate_series(1, 10000000);</p><p>NOTE: this only needs to be done one time, and it might take a while to run on your computer. You can do this directly from SQL, you do not need to do this from python.</p><h4 id="join-existing-data-with-random-data"> <a href="#join-existing-data-with-random-data" class="anchor-heading" aria-labelledby="join-existing-data-with-random-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Join existing data with random data</h4><p>You should count the number of random values that are greater than 80 for each state in your census data table.<br /> Your number will be slightly different than other students in the class.<br /> This should be done via a single SQL statement.<br /> You should join both tables, and count the number with a rand_value greater than 80. This query might take a while to run. You should run this query via your python script.</p><h4 id="add-an-index-to-your-table-and-measure-a-change-in-performance"> <a href="#add-an-index-to-your-table-and-measure-a-change-in-performance" class="anchor-heading" aria-labelledby="add-an-index-to-your-table-and-measure-a-change-in-performance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add an index to your table and measure a change in performance</h4><p>We will speed up this query using at least one index.<br /> You should first run the query you created in the step above without the index created. You should observe and record the exact timing of the run with the “EXPLAIN ANALYZE” feature.<br /> Then, you should create at least one index that you think will speed it up.<br /> Then you should re-run the query with EXPLAIN ANALYZE with the index, and record what the speed up was.<br /> You should try adding a second index, and observe if there is a performance gain. <br /> You should copy the output of your script, including the recorded exectution times before and after the index, and commit them to your repo in a text file called SQLResults.txt. HINT: You might need to delete the index if you want to try doing this several times.</p><h2 id="resources"> <a href="#resources" class="anchor-heading" aria-labelledby="resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resources</h2><p>https://www.postgresql.org/docs/current/sql-createview.html https://www.postgresql.org/docs/current/transaction-iso.html https://www.postgresql.org/docs/13/sql-createindex.html</p><h2 id="deadlines-and-deliverables"> <a href="#deadlines-and-deliverables" class="anchor-heading" aria-labelledby="deadlines-and-deliverables"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deadlines and Deliverables</h2><p>The deliverable should be committed and pushed to the main branch of your repository on GitHub. It is due Thursday, March 18th. The files that should be included in your repository (in a subdirectory hw5) should be: 1) hw5.py 2) SQLResults.txt. Additional files are okay, but these are required.</p></div></div><div class="search-overlay"></div></div>
